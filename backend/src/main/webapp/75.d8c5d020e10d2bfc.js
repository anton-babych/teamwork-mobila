"use strict";(self.webpackChunkmobila=self.webpackChunkmobila||[]).push([[75],{9075:(I,d,s)=>{s.r(d),s.d(d,{ItemPageComponent:()=>x});var a=s(8649),r=s(1135),_=s(7579),u=s(9300),g=s(2722),m=s(2591),l=s(6895),t=s(4650);let h=(()=>{class n{handleBasketButtonClick(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["add-basket-button"]],standalone:!0,features:[t.jDz],decls:3,vars:0,consts:[[1,"btn",3,"click"],[1,"btn__text"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return i.handleBasketButtonClick()}),t.TgZ(1,"span",1),t._uU(2,"add"),t.qZA()())},styles:[".btn[_ngcontent-%COMP%]{width:20rem;background-color:#282828;display:flex;justify-content:center;place-items:center;cursor:pointer}.btn__text[_ngcontent-%COMP%]{padding:2rem 0;color:#fff;font-weight:500;font-size:2rem}"],changeDetection:0}),n})();var f=s(7755);const b=function(n,o){return["/",n,o]};function C(n,o){if(1&n&&(t.TgZ(0,"div",15),t._UZ(1,"img",16),t.TgZ(2,"div",17),t._uU(3),t.qZA()()),2&n){const e=o.$implicit,i=t.oxw(4);t.Q6J("routerLink",t.WLB(3,b,i.getOpositeCategory(),e.id)),t.xp6(1),t.Q6J("src",e.imagePath,t.LSH),t.xp6(2),t.Oqu(e.firm+e.model)}}function v(n,o){if(1&n&&(t.TgZ(0,"div",11)(1,"p",12),t._uU(2,"usually comes with:"),t.qZA(),t.TgZ(3,"div",13),t.YNc(4,C,4,6,"div",14),t.qZA()()),2&n){const e=t.oxw().ngIf;t.xp6(4),t.Q6J("ngForOf",e)}}function P(n,o){if(1&n&&(t.ynx(0),t.YNc(1,v,5,1,"div",10),t.BQk()),2&n){const e=o.ngIf;t.xp6(1),t.Q6J("ngIf",e.length)}}function y(n,o){if(1&n&&(t.TgZ(0,"div",1)(1,"div",2),t._UZ(2,"img",3),t.qZA(),t.TgZ(3,"div",4)(4,"p",5),t._uU(5),t.qZA(),t.TgZ(6,"p",6),t._uU(7),t.qZA(),t.TgZ(8,"p",7),t._uU(9),t.qZA(),t.TgZ(10,"div",8),t._UZ(11,"add-basket-button"),t.qZA(),t.YNc(12,P,2,1,"ng-container",9),t.ALo(13,"async"),t.qZA()()),2&n){const e=o.ngIf,i=t.oxw();t.xp6(2),t.Q6J("src",e.imagePath,t.LSH),t.xp6(3),t.AsE("",e.firm," ",e.model,""),t.xp6(2),t.hij("",e.price," uah"),t.xp6(2),t.hij(" ",e.description," "),t.xp6(3),t.Q6J("ngIf",t.lcZ(13,6,i.compatibleProducts$))}}let x=(()=>{class n{constructor(e,i,c){this.productFacade=e,this.route=i,this.router=c,this.shopCategory=a.tA,this.item$=new r.X({}),this.category$=new r.X(a.tA.Phones),this.compatibleProducts$=new r.X([]),this.isDestroyed$=new _.x,this.isItemChanged$=new _.x}ngOnInit(){this.initItem(),this.router.events.pipe((0,u.h)(e=>e instanceof m.m2)).subscribe(()=>{this.isItemChanged$.next(),this.initItem()})}initItem(){const{category:e,id:i}=this.parseItemFromUrl();this.getItem(e,i),this.item$.pipe((0,g.R)(this.isItemChanged$)).subscribe(c=>{console.log("looking for compatible"),c.id&&this.productFacade.loadCompatibleProducts(c.id,this.category$.value,this.getOpositeCategory()).pipe((0,g.R)(this.isItemChanged$)).subscribe(p=>{p&&(this.compatibleProducts$.next(p),console.log("compatible ",p))})})}parseItemFromUrl(){let e=this.route.snapshot.paramMap.get("category"),i=this.route.snapshot.paramMap.get("id");if(!e||!i)throw new Error("no id or category");return{category:e,id:i}}getItem(e,i){this.productFacade.getProductById(e,i).pipe((0,g.R)(this.isDestroyed$)).subscribe(c=>{c&&(this.item$.next(c),this.category$.next(e))})}ngOnDestroy(){this.isDestroyed$.next()}getOpositeCategory(){switch(this.category$.value){case a.tA.Phones:return a.tA.Headphones;case a.tA.Headphones:return a.tA.Phones}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.g0),t.Y36(m.gz),t.Y36(m.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["item-page"]],standalone:!0,features:[t.jDz],decls:2,vars:3,consts:[["class","item",4,"ngIf"],[1,"item"],[1,"item__images"],["alt","image",1,"item__images__image",3,"src"],[1,"item__main"],[1,"item__main-name","mb-10"],[1,"item__main-price","mb-10"],[1,"item__main-description","mb-10"],[1,"item__main-basket-btn"],[4,"ngIf"],["class","compatible-section",4,"ngIf"],[1,"compatible-section"],[1,"compatible-section__title"],[1,"compatible-section__content"],["class","compatible-section__item",3,"routerLink",4,"ngFor","ngForOf"],[1,"compatible-section__item",3,"routerLink"],["alt","",1,"compatible-section__item__image",3,"src"],[1,"compatible-section__item__name"]],template:function(e,i){1&e&&(t.YNc(0,y,14,8,"div",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,i.item$))},dependencies:[l.O5,l.Ov,l.sg,h,m.rH],styles:[".compatible-section[_ngcontent-%COMP%]{width:100%}.compatible-section__title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500;text-align:center;margin-bottom:2rem}.compatible-section__content[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:1rem}.compatible-section__item[_ngcontent-%COMP%]{cursor:pointer;border:.5px solid black;padding:2rem;display:flex;flex-direction:column;justify-content:space-evenly;place-items:center}.compatible-section__item__image[_ngcontent-%COMP%]{height:15rem;background-size:cover;background-repeat:no-repeat;background-position:center;margin-bottom:2rem}.compatible-section__item__name[_ngcontent-%COMP%]{font-size:1.3rem}.item[_ngcontent-%COMP%]{display:flex;height:100vh;width:100%;overflow:hidden}.item__images[_ngcontent-%COMP%]{width:40%;height:100%;overflow:scroll}.item__images__image[_ngcontent-%COMP%]{width:100%}.item__images__image[_ngcontent-%COMP%]:not(last-child){border-bottom:1px black solid}.item__main[_ngcontent-%COMP%]{width:60%;height:100%;overflow:scroll;display:flex;flex-direction:column;justify-content:center;place-items:center;padding-right:5rem}.item__main-name[_ngcontent-%COMP%]{font-size:3rem;font-weight:900;text-transform:uppercase}.item__main-price[_ngcontent-%COMP%]{font-size:3rem}.item__main-description[_ngcontent-%COMP%]{font-size:1.3rem}.item__main-basket-btn[_ngcontent-%COMP%]{margin-bottom:10rem}.mb-10[_ngcontent-%COMP%]{margin-bottom:1rem}"],changeDetection:0}),n})()}}]);