"use strict";(self.webpackChunkmobila=self.webpackChunkmobila||[]).push([[671],{9671:(j,C,s)=>{s.r(C),s.d(C,{ShopPageComponent:()=>D});var m=s(1135),c=s(6895),e=s(4650),p=s(2591);const _=["item","","category",""],y=function(n,i){return["/",n,i]};let v=(()=>{class n{constructor(){this.mouseEntered=new e.vpe,this.mouseLeaved=new e.vpe}onMouseEnter(){this.item.enabled&&this.mouseEntered.emit(this.item.payload.model)}onMouseLeave(){this.item.enabled&&this.mouseLeaved.emit(this.item.payload.model)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["canvas-item","item","","category",""]],inputs:{item:"item",category:"category"},outputs:{mouseEntered:"mouseEntered",mouseLeaved:"mouseLeaved"},standalone:!0,features:[e.jDz],attrs:_,decls:2,vars:9,consts:[[1,"canvas-item-container"],[3,"routerLink","src","alt","mouseenter","mouseleave"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"img",1),e.NdJ("mouseenter",function(){return o.onMouseEnter()})("mouseleave",function(){return o.onMouseLeave()}),e.qZA()()),2&t&&(e.xp6(1),e.Gre("canvas-item ",o.item.enabled?"canvas-item__enabled":"canvas-item__disabled",""),e.Q6J("routerLink",e.WLB(6,y,o.category,o.item.payload.id))("src",o.item.payload.imagePath,e.LSH)("alt",o.item.payload.model))},dependencies:[p.rH],styles:[".canvas-item-container[_ngcontent-%COMP%]{margin:10rem}.canvas-item[_ngcontent-%COMP%]{height:300px;z-index:8;transition:transform .25s ease-in-out,opacity .5s ease-in-out;box-shadow:#3d3d3d45 5px 5px 15px;cursor:pointer}.canvas-item__enabled[_ngcontent-%COMP%]:hover{transform:scale(1.2);z-index:10}.canvas-item__disabled[_ngcontent-%COMP%]{filter:grayscale(1);opacity:.5}"],changeDetection:0}),n})();var x=s(5861);function f(){return(f=(0,x.Z)(function*(n,i,t,o,r){return new Promise((a,l)=>{setTimeout(()=>{n||l(new Error("no container")),i||l(new Error("no tilesContainer"));let g=function b(n){return(t=>{if(!t)return 0;const o=document.body.clientWidth>800?50:70;let r=Math.floor(t.clientWidth/o),a=Math.floor(t.clientHeight/o);return t.style.setProperty("--columns",r.toString()),t.style.setProperty("--rows",a.toString()),r*a})(n)}(i);a(g)},2)})})).apply(this,arguments)}var h=s(9749);let w=(()=>{class n{constructor(){this.state={name:"test",visible:!1}}ngAfterViewInit(){this.animateIn()}animateIn(){h.p8.to(".item-name span",{yPercent:0})}animateOut(){h.p8.to(".item-name span",{yPercent:-100})}ngOnChanges(t){let o=t.state.currentValue||void 0;o&&(o.visible?this.animateIn():this.animateOut())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["product-text"]],inputs:{state:"state"},standalone:!0,features:[e.TTD,e.jDz],decls:3,vars:1,consts:[[1,"item-name"]],template:function(t,o){1&t&&(e.TgZ(0,"p",0)(1,"span"),e._uU(2),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(o.state.name))},styles:[".item-name[_ngcontent-%COMP%]{font-family:JetBrains,sans-serif;font-size:13vw;overflow:hidden}.item-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transform:translateY(-100%);display:block}"],changeDetection:0}),n})(),T=(()=>{class n{transform(t,o){if(console.log("filter inside"),!t)return[];if(!o)return t.map(a=>({payload:a,enabled:!0}));let r=t.map(a=>{let l=!0;if(o.name){let g=o.name?.toLowerCase()||"";l=a.model.toLowerCase().includes(g)}return console.log("filter inside",l,"after name"),{payload:a,enabled:l}});return console.log(r,"filter check"),r}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"filter",type:n,pure:!0,standalone:!0}),n})();function O(n,i){1&n&&e._UZ(0,"div",6)}function M(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"canvas-item",7),e.NdJ("mouseEntered",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.onCanvasItemEnter(r))})("mouseLeaved",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.onCanvasItemLeave(r))}),e.qZA()}if(2&n){const t=i.$implicit,o=e.oxw();e.Q6J("item",t)("category",o.shopCategory)}}function F(n,i){if(1&n&&(e.TgZ(0,"div",8),e._UZ(1,"product-text",9),e.qZA()),2&n){const t=i.ngIf;e.xp6(1),e.Q6J("state",t)}}const Z=function(){return[]};let k=(()=>{class n{constructor(){this.data=[],this.tilesQuantity$=new m.X(1),this.productHoverState$=new m.X({name:"",visible:!1})}ngAfterViewInit(){this.tilesCreate(),window.onresize=()=>this.tilesCreate()}tilesCreate(){let t=document.getElementById("canvas-container"),o=document.getElementById("tiles");if(!t)throw new Error("no canvas");if(!o)throw new Error("no tiles container");if(!this.data)throw new Error("no data");(function P(n,i,t,o,r){return f.apply(this,arguments)})(t,o,this.data,1,3).then(r=>this.tilesQuantity$.next(r))}onCanvasItemContainerIsLoaded(){window.scrollTo(screen.width/2,screen.height/2)}onCanvasItemEnter(t){this.productHoverState$.next({name:t,visible:!0})}onCanvasItemLeave(t){this.productHoverState$.next({name:t,visible:!1})}ngOnChanges(t){t.filterConfig.currentValue&&console.log("check")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["canvas-widget"]],inputs:{data:"data",filterConfig:"filterConfig",shopCategory:"shopCategory"},standalone:!0,features:[e.TTD,e.jDz],decls:9,vars:11,consts:[["id","canvas-container",1,"canvas"],["id","tiles"],["class","tile",4,"ngFor","ngForOf"],[1,"content"],[3,"item","category","mouseEntered","mouseLeaved",4,"ngFor","ngForOf"],["class","item-name-container",4,"ngIf"],[1,"tile"],[3,"item","category","mouseEntered","mouseLeaved"],[1,"item-name-container"],[3,"state"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,O,1,0,"div",2),e.ALo(3,"async"),e.qZA(),e.TgZ(4,"div",3),e.YNc(5,M,1,2,"canvas-item",4),e.ALo(6,"filter"),e.YNc(7,F,2,1,"div",5),e.ALo(8,"async"),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngForOf",e.DdM(10,Z).constructor(e.lcZ(3,3,o.tilesQuantity$))),e.xp6(3),e.Q6J("ngForOf",e.xi3(6,5,o.data,o.filterConfig)),e.xp6(2),e.Q6J("ngIf",e.lcZ(8,8,o.productHoverState$)))},dependencies:[c.ez,c.sg,c.O5,c.Ov,v,w,T],styles:['.canvas[_ngcontent-%COMP%]{width:100vw;min-height:100vh;position:absolute;overflow:hidden}.content[_ngcontent-%COMP%]{z-index:5;width:100%;height:100%;display:flex;flex-wrap:wrap;position:relative}#tiles[_ngcontent-%COMP%]{position:absolute;background-color:#eeefff;width:100%;height:100%;display:grid;grid-template-columns:repeat(var(--columns),1fr);grid-template-rows:repeat(var(--rows),1fr)}.tile[_ngcontent-%COMP%]{position:relative}.tile[_ngcontent-%COMP%]:before{background-color:#fff;content:"";inset:1px;position:absolute}.canvas-item-pos[_ngcontent-%COMP%]{height:max-content;width:max-content}.item-name-container[_ngcontent-%COMP%]{pointer-events:none;position:fixed;width:100%;display:flex;justify-content:center;place-items:center;bottom:0;z-index:10}'],changeDetection:0}),n})();var d=s(4006);let S=(()=>{class n{constructor(){this.isChanged=new e.vpe,this.inputText=""}onInputChange(t){this.isChanged.emit(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["filter-by-model-name"]],outputs:{isChanged:"isChanged"},standalone:!0,features:[e.jDz],decls:2,vars:1,consts:[[1,"filter-name"],["type","text","id","filter-name-input","placeholder","filter by name",1,"filter-name-input",3,"ngModel","ngModelChange"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"input",1),e.NdJ("ngModelChange",function(a){return o.inputText=a})("ngModelChange",function(a){return o.onInputChange(a)}),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngModel",o.inputText))},dependencies:[d.u5,d.Fj,d.JJ,d.On],styles:[".filter-name[_ngcontent-%COMP%]{background-color:#fff;border-radius:0 1rem 1rem 0}.filter-name-input[_ngcontent-%COMP%]{width:100%;height:4rem;border:none;font-size:1.4rem;box-shadow:inset .2rem .2rem .5rem #c8d0e7,inset -.2rem -.2rem .5rem #fff;background:none;font-family:inherit;color:#9baacf}.filter-name-input[_ngcontent-%COMP%]:focus{outline:none;box-shadow:.3rem .3rem .6rem #c8d0e7,-.2rem -.2rem .5rem #fff}.filter-name-input[_ngcontent-%COMP%]::placeholder{color:#bec8e4}.filter-name[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.6rem;text-transform:uppercase;padding:0 2rem;cursor:pointer}"],changeDetection:0}),n})();var u=s(8649);function A(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"a",4),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.OnClick(a))}),e._uU(1),e.qZA()}if(2&n){const t=i.$implicit;e.xp6(1),e.Oqu(t)}}let I=(()=>{class n{constructor(){this.shopCategories=Object.values(u.tA),this.currentCategory$=new m.X(this.shopCategories[0]),this.isChanged=new e.vpe}OnClick(t){this.currentCategory$.next(t),this.isChanged.emit(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["filter-by-category"]],outputs:{isChanged:"isChanged"},standalone:!0,features:[e.jDz],decls:6,vars:4,consts:[[1,"dropdown"],[1,"dropbtn"],[1,"dropdown-content"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e._uU(2),e.ALo(3,"async"),e.qZA(),e.TgZ(4,"div",2),e.YNc(5,A,2,1,"a",3),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,2,o.currentCategory$)),e.xp6(3),e.Q6J("ngForOf",o.shopCategories))},dependencies:[d.u5,c.sg,c.Ov],styles:[".dropdown[_ngcontent-%COMP%]{width:15rem;display:block}.dropbtn[_ngcontent-%COMP%]{background-color:#c7c7c7;color:#fff;width:100%;padding:2rem 0;font-size:12px;border:none;cursor:pointer}.dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.dropdown-content[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#f9f9f9;min-width:160px;box-shadow:0 8px 16px #0003;z-index:1}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;padding:12px 16px;text-decoration:none;display:block}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.dropdown[_ngcontent-%COMP%]:hover   .dropbtn[_ngcontent-%COMP%]{background-color:#3e8e41}"],changeDetection:0}),n})(),$=(()=>{class n{constructor(){this.isSubmitted=new e.vpe,this.filterConfig={category:u.tA.Phones}}handleSubmitClick(){this.isSubmitted.next({...this.filterConfig})}handleFilterByNameChange(t){this.filterConfig.name=t}handleFilterByCategoryChange(t){this.filterConfig.category=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["filter-products"]],outputs:{isSubmitted:"isSubmitted"},standalone:!0,features:[e.jDz],decls:11,vars:0,consts:[[1,"filter"],[1,"filter__part"],[1,"filter__text"],[3,"isChanged"],[1,"filter__btn",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"p",2),e._uU(3,"model name"),e.qZA(),e.TgZ(4,"filter-by-model-name",3),e.NdJ("isChanged",function(a){return o.handleFilterByNameChange(a)}),e.qZA()(),e.TgZ(5,"div",1)(6,"p",2),e._uU(7,"category"),e.qZA(),e.TgZ(8,"filter-by-category",3),e.NdJ("isChanged",function(a){return o.handleFilterByCategoryChange(a)}),e.qZA()(),e.TgZ(9,"button",4),e.NdJ("click",function(){return o.handleSubmitClick()}),e._uU(10,"submit"),e.qZA()())},dependencies:[S,I],styles:[".filter[_ngcontent-%COMP%]{background-color:#ffffff57;border:1px black solid;width:20rem;padding:3rem;display:flex;flex-direction:column;justify-content:center;place-items:center}.filter__btn[_ngcontent-%COMP%]{display:inline}.filter__part[_ngcontent-%COMP%]{margin-bottom:2rem;display:flex;flex-direction:column;justify-content:right;place-items:center}.filter__text[_ngcontent-%COMP%]{font-size:1rem}"],changeDetection:0}),n})(),N=(()=>{class n{constructor(){this.isClicked=new e.vpe,this.toOpen=!1}OnClick(){this.toOpen=!this.toOpen,this.isClicked.emit(this.toOpen)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["filter-button"]],outputs:{isClicked:"isClicked"},standalone:!0,features:[e.jDz],decls:2,vars:0,consts:[[1,"filter-button"],["src","assets/icons/filter.svg","alt","filter icon",1,"filter-button__icon",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"img",1),e.NdJ("click",function(){return o.OnClick()}),e.qZA()())},styles:[".filter-button[_ngcontent-%COMP%]{width:5rem;height:5rem;display:flex;justify-content:center;place-items:center;cursor:pointer}.filter-button__icon[_ngcontent-%COMP%]{width:3rem}"],changeDetection:0}),n})();var B=s(7755);function L(n,i){if(1&n&&(e.ynx(0),e._UZ(1,"canvas-widget",8),e.ALo(2,"async"),e.BQk()),2&n){const t=i.ngIf,o=e.oxw().ngIf,r=e.oxw(2);e.xp6(1),e.Q6J("data",o[t.category])("filterConfig",e.lcZ(2,3,r.filterConfig$))("shopCategory",t.category)}}function q(n,i){if(1&n&&(e.ynx(0),e.YNc(1,L,3,5,"ng-container",7),e.ALo(2,"async"),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.filterConfig$))}}function z(n,i){if(1&n&&(e.ynx(0),e.YNc(1,q,3,3,"ng-container",1),e.ALo(2,"async"),e.BQk()),2&n){const t=e.oxw(),o=e.MAs(10);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,t.productFacade.products$))("ngIfElse",o)}}function E(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",9)(1,"filter-products",10),e.NdJ("isSubmitted",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.onFilterSubmitted(r))}),e.qZA()()}}function J(n,i){1&n&&(e.TgZ(0,"p",11),e._uU(1,"loading..."),e.qZA())}function Q(n,i){1&n&&(e.TgZ(0,"p",11),e._uU(1,"There is no products"),e.qZA())}let D=(()=>{class n{constructor(t,o,r){this.productFacade=t,this.router=o,this.route=r,this.filterConfig$=new m.X({category:u.tA.Phones}),this.filterShown$=new m.X(!1)}ngOnInit(){this.route.queryParams.subscribe(t=>{console.log("query params parse",t);let o=t.category;o&&o in u.tA&&this.applyToFilterCategory(o);let r=t.name;r&&this.applyToFilterName(r)}),this.filterConfig$.subscribe(t=>{console.log("filet config changed"),this.applyQueryParams()})}applyQueryParams(){console.log("applyQueryParams");const t={queryParams:{}};this.filterConfig$.value.category&&(t.queryParams={...t.queryParams,category:this.filterConfig$.value.category}),void 0!==this.filterConfig$.value.maxPrice&&(t.queryParams={...t.queryParams,maxPrice:this.filterConfig$.value.maxPrice.toString()}),void 0!==this.filterConfig$.value.minPrice&&(t.queryParams={...t.queryParams,minPrice:this.filterConfig$.value.minPrice.toString()}),this.filterConfig$.value.name&&(t.queryParams={...t.queryParams,name:this.filterConfig$.value.name}),this.router.navigate([],t)}onFilterSubmitted(t){this.filterConfig$.next(t)}applyToFilterCategory(t){this.filterConfig$.next({...this.filterConfig$.value,category:t})}applyToFilterName(t){this.filterConfig$.next({...this.filterConfig$.value,name:t})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(B.g0),e.Y36(p.F0),e.Y36(p.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["shop-page"]],standalone:!0,features:[e.jDz],decls:11,vars:7,consts:[[1,"page-container"],[4,"ngIf","ngIfElse"],["class","filter-products-container",4,"ngIf"],[1,"filter-icon"],[3,"isClicked"],["loading",""],["noProducts",""],[4,"ngIf"],[3,"data","filterConfig","shopCategory"],[1,"filter-products-container"],[3,"isSubmitted"],[1,"status-text"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,z,3,4,"ng-container",1),e.ALo(2,"async"),e.qZA(),e.YNc(3,E,2,0,"div",2),e.ALo(4,"async"),e.TgZ(5,"div",3)(6,"filter-button",4),e.NdJ("isClicked",function(a){return o.filterShown$.next(a)}),e.qZA()(),e.YNc(7,J,2,0,"ng-template",null,5,e.W1O),e.YNc(9,Q,2,0,"ng-template",null,6,e.W1O)),2&t){const r=e.MAs(8);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,3,o.productFacade.loaded$))("ngIfElse",r),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,5,o.filterShown$))}},dependencies:[c.Ov,c.ez,c.O5,k,$,N],styles:[".page-container[_ngcontent-%COMP%]{overflow:hidden}.filter-products-container[_ngcontent-%COMP%]{position:fixed;right:4rem;transform:translate(-50%);bottom:2rem;z-index:50}.status-text[_ngcontent-%COMP%]{position:relative;font-size:2rem;padding:2rem}.filter-icon[_ngcontent-%COMP%]{position:fixed;top:5rem;right:1rem;z-index:10}"],changeDetection:0}),n})()}}]);